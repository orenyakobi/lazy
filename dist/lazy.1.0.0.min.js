/*! Lazy.JS - v1.0.0 - 2014-07-01
* Lightweight lazy loader for JS, CSS & LESS assets.
* http://orenyakobi.github.io/lazy
*
* Copyright (c) 2014 Oren yakobi <orenykb@gmail.com>;
* Licensed under the MIT license */
var lazy=function(){"use strict";var e={};return{load:function(t,n){var r=function(e){return function(){if(typeof n!=="undefined"){for(var r=0,i=t.length;r<i;r++){if(t[r]===e){t.splice(r>0?r--:r,1)}}if(!t.length){n()}}}};var i=function(e){var t={};t.ext=s(e);if(t.ext){t.path=e.split(/\#|\?/)[0];return t}else{return false}};var s=function(e){var t=e.split(/\#|\?/)[0].split(".").pop();if(!/^\w+$/.test(t)){u("File extension is not specified ( "+e+" )");return false}else{return t}};var o=function(e){switch(e.ext){case"css":var t=document.createElement("link");t.href=e.path;t.rel="stylesheet";return t;case"js":var t=document.createElement("script");t.src=e.path;t.type="text/javascript";return t;case"less":var t=document.createElement("style");t.id="lazyStyle";return t;default:u("Unsupported extension ( "+ext+" )");return false}};var u=function(e){console.log("~ Lazy Error: "+e)};var a=function(){if(window.XMLHttpRequest){var e=new XMLHttpRequest}else if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.XMLHTTP")}if(e===null){u("Your browser does not support XMLHTTP")}return e};var f=function(t,n){var r=t.split(",");for(var s=0,o=r.length;s<o;s++){if(typeof e[r[s]]==="undefined"){var u=i(t);if(u){l(u,n)}else{break}}}};var l=function(t,n){e[t.path]=1;if(t.ext==="less"){c(t,n)}else{var r=o(t),i=false,s=document.getElementsByTagName("head")[0];s.appendChild(r);if(t.ext==="css"){var u=document.createElement("img");u.onerror=function(){if(typeof n!=="undefined")n()};u.src=t.path}else{r.onload=r.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){i=true;r.onload=r.onreadystatechange=null;if(s&&r.parentNode){s.removeChild(r)}if(typeof n!=="undefined")n()}}}}};var c=function(t,n){if(typeof less!=="undefined"){e[t.path]=1;var r=a();r.onreadystatechange=function(){if(r.readyState===4){var e=new less.Parser;e.parse(r.responseText,function(e,n){var r=n.toCSS();if(!document.getElementById("lazyStyle")){var i=o(t);document.getElementsByTagName("head")[0].appendChild(i)}document.getElementById("lazyStyle").innerHTML=document.getElementById("lazyStyle").innerHTML+r});if(typeof n!=="undefined")n()}};r.open("GET",t.path,true);r.send(null)}else{u("Can't load .less file, less.js is missing")}};t=t instanceof Array?t:[t];for(var h=0,p=t.length;h<p;h++){var d=t[h].replace(/\s+/g,"");if(d.lastIndexOf("<")>2){(function(){var e=d.split("<");(function n(){if(e.length){f(e.pop(),n)}else{r(t[h])}})()})()}else{f(d,r(t[h]))}}}}}()